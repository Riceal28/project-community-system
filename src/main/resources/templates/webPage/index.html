<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Greenfield Community</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!--    <link rel="shortcut icon" th:href="@{/webStatic/img/favicon.ico}" href="img/favicon.ico" type="image/x-icon">-->
    <link rel="apple-touch-icon" th:href="@{/webStatic/img/apple-touch-icon.png}" href="img/apple-touch-icon.png">
    <link rel="apple-touch-icon" th:href="@{/webStatic/img/apple-touch-icon-72x72.png}" sizes="72x72"
          href="img/apple-touch-icon-72x72.png">
    <!--    <link rel="apple-touch-icon" th:href="@{/webStatic/img/apple-touch-icon-114x114.png}" sizes="114x114"-->
    <!--          href="img/apple-touch-icon-114x114.png">-->

    <link rel="stylesheet" type="text/css" th:href="@{/webStatic/css/bootstrap.css}" href="css/bootstrap.css">
    <link rel="stylesheet" type="text/css" th:href="@{/webStatic/fonts/font-awesome/css/font-awesome.css}"
          href="fonts/font-awesome/css/font-awesome.css">

    <link rel="stylesheet" type="text/css" th:href="@{/webStatic/css/style.css}" href="css/style.css">
    <link rel="stylesheet" type="text/css" th:href="@{/webStatic/css/nivo-lightbox/nivo-lightbox.css}"
          href="css/nivo-lightbox/nivo-lightbox.css">
    <link rel="stylesheet" type="text/css" th:href="@{/webStatic/css/nivo-lightbox/default.css}"
          href="css/nivo-lightbox/default.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/adminStatic/layui/css/layui.css}">
    <link rel="stylesheet" th:href="@{/adminStatic/layui/css/layui.css}">
    <script th:src="@{/adminStatic/layui/layui.js}"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>



    <![endif]-->
    <style>
        #webOut:hover, #editPhone:hover {
            cursor: pointer;
            text-decoration: underline;
            color: rgba(255, 255, 255, .9);
        }

        .text_span {
            display: inline-block;
            white-space: nowrap;
            min-width: 500px;
            max-width: 500px;
            overflow: hidden;
            text-overflow: ellipsis;
        }
    </style>
    <style>
        input[type="text"] {
            padding: 8px;
            width: 300px;
            margin-bottom: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #f4f4f4;
        }

        tr:hover {
            background-color: #f1f1f1;
        }
    </style>
</head>
<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">

<nav id="menu" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1"><span class="sr-only">Toggle navigation</span> <span
                    class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button>
            <a class="navbar-brand page-scroll" href="#page-top" style="font-size: 28px">Greenfield Community</a>
        </div>


        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="#header" class="page-scroll">Home Page</a></li>
<!--                <li><a href="javascript:;" id="buyHouse" class="page-scroll">Property Fee Inquiry</a></li>-->
<!--                <li><a href="javascript:;" id="buyCarPark" class="page-scroll">Parking Fee Inquiry</a></li>-->
                <li><a href="#notice" class="page-scroll">Announcement</a></li>
                <li><a href="#houseRental" class="page-scroll">House Rental</a></li>
                <li><a href="#services" class="page-scroll">Complaint Service</a></li>
                <li><a href="#about" class="page-scroll">Repair Service</a></li>
                <li><a href="#testimonials" class="page-scroll">About Us</a></li>
                <li><a th:href="@{system/toLoginPage}" target="_blank" class="page-scroll">Admin Dashboard</a></li>
<!--                <li><a target="_blank" class="page-scroll">Admin Dashboard</a></li>-->
            </ul>
        </div>

    </div>
</nav>
<!-- 头部 -->
<header id="header">
    <div class="intro">
        <div class="overlay">
            <div class="container">
                <div class="row">
                    <div class="col-md-8 col-md-offset-2 intro-text">
                        <h1 style="font-size: 52px">Welcome home!</h1>
                        <p> Life is a book without words, and people with sharp eyes can see the wonderful words;
                            a book is life with words, and only people with rich emotions can deeply understand it.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- 获取接触部分 -->
<div id="get-touch">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-md-6 col-md-offset-1">
                <h3 style="font-size: 20px">If you need to report a repair or complain about service, please log in first!</h3>
                <p>When logging in, just enter your name and phone number registered with the property!</p>
            </div>
            <div class="col-xs-12 col-md-4 text-center">
                <a th:if="${session.webUser == null}" class="btn btn-custom btn-lg page-scroll" id="toLogin">Log in now</a>
                <div style="font-size: 16px; height: 64px;" th:if="${session.webUser != null}">
                    <div>

                        <div style="width: 250px; text-align: center; margin: 0 auto; line-height: 30px">
                            Already logged in! Welcome:
                            <input type="hidden" th:value="${session.webUser.id}" id="userId">
                            <input type="hidden" th:value="${session.webUser.userName}" id="userName">
                            <span th:text="${session.webUser.userName}"></span>&emsp;
                        </div>
                        <div style="width: 150px; text-align: center; margin: 0 auto; line-height: 30px">
                            <span id="editPhone">Modify information</span>&nbsp;
                            <span id="webOut">Log out</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 公告通知 -->
<div id="notice">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-md-6">
                <div class="about-text">
                    <h2 style="font-size: 30px;">
                        Announcement
                        <button type="button" class="btn btn-primary" id="createNotice" style="float: right;">
                            Announcement
                        </button>
                        <button type="button" class="btn btn-primary" id="meNotice"
                                style="float: right; margin-right: 8px">
                            Post
                        </button>
                        <button type="button" class="btn btn-primary" id="meComment"
                                style="float: right; margin-right: 8px">
                            Comment
                        </button>
                        <div style="clear: both"></div>
                    </h2>
                    <div class="col-lg-12 col-sm-12 col-xs-12" style="padding-left: 0;
                            max-height: 245px; min-height: 245px">
                        <div class="panel-group" id="accordion">
                            <div class="panel panel-default" th:each="notice, eachStatus : ${noticeInfo}">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#accordion"
                                           th:href="'#title'+${notice.id}" style="font-size: 15px">
                                            [[${notice.title}]]&emsp;-&emsp;
                                            <span style="font-size: 14px">[[${notice.createDate}]]</span>
                                        </a>
                                    </h4>
                                </div>
                                <div th:id="'title'+${notice.id}" th:class="${eachStatus.index == 0 ?
                                            'panel-collapse collapse in' : 'panel-collapse collapse'}">
                                    <div class="panel-body" style="padding: 8px 12px;">
                                        <span th:text="${notice.content}" class="text_span"></span>
                                        <div style="margin-top: 2px">
                                            <button type="button" class="btn btn-primary noticeInfoBtn"
                                                    th:data-id="${notice.id}">
                                                Details
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <nav aria-label="Page navigation">
                            <input type="hidden" name="currPage" th:value="${currPage}">
                            <input type="hidden" name="totalPage" th:value="${totalPage}">
                            <ul class="pagination">
                                <li id="prev">
                                    <a href="javascript:;" aria-label="Previous">
                                        <span aria-hidden="true">&laquo;</span>
                                    </a>
                                </li>
                                <li th:each="page : ${pagesList}"
                                    th:class="${currPage == page ? 'active pageNum' : 'pageNum'}">
                                    <a href="javascript:;">[[${page}]]</a>
                                </li>
                                <li id="next">
                                    <a href="javascript:;" aria-label="Next">
                                        <span aria-hidden="true">&raquo;</span>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-md-6">
                <img th:src="@{/webStatic/img/new_index.jpg}" class="img-responsive" alt="" width="585" height="350">
            </div>
        </div>
    </div>
</div>



<!-- 租房服务 -->
<div id="houseRental">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-md-6">
                <div class="about-text">
                    <h2 style="font-size: 30px">Rental Service</h2>
                    <div class="col-lg-12 col-sm-12 col-xs-12" style="padding-left: 0;">
                        <form role="form" style="position: relative; top: 0">
                            <div class="input-group form-group">
                                <span class="input-group-addon">Description</span>
                                <input id="houseMessage" type="text" class="form-control" name="complaintUserName" placeholder="Please enter key words about house"
                                       aria-describedby="basic-addon1">
                                <span class="input-group-addon">Press EnterKey</span>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <table id="propertyTable">
                <thead>
                <tr>
                    <th>Location</th>
                    <th>Room area</th>
                    <th>House type</th>
                    <th>Household</th>
                    <th>Telephone</th>
                </tr>
                </thead>
                <tbody id="tableBody">
                <!-- 动态渲染行 -->
                </tbody>
            </table>
        </div>
    </div>
</div>


<!-- 投诉服务 -->
<div id="services">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-md-6">
                <div class="about-text">
                    <h2 style="font-size: 30px">Complaint Service</h2>
                    <div class="col-lg-12 col-sm-12 col-xs-12" style="padding-left: 0;">
                        <form role="form" style="position: relative; top: 0">
                            <div class="input-group form-group">
                                <span class="input-group-addon">Name</span>
                                <input type="text" class="form-control" name="complaintUserName" placeholder="Please enter your name"
                                       aria-describedby="basic-addon1"
                                       th:value="${session.webUser != null ? session.webUser.userName : ''}">
                            </div>
                            <div class="input-group form-group">
                                <span class="input-group-addon">Phone number</span>
                                <input type="text" class="form-control" name="complaintPhone" placeholder="Please enter your phone number"
                                       aria-describedby="basic-addon1"
                                       th:value="${session.webUser != null ? session.webUser.phone : ''}">
                            </div>
                            <div class="form-group">
                                <textarea class="form-control" rows="5" name="complaintInfo" placeholder="Please specify the content of your complaint"
                                          style="resize: none"></textarea>
                            </div>
                            <div class="form-group">
                                <button id="complaintBtn" type="button" class="btn btn-primary"
                                        style="position:absolute; right: 0px">
                                    Submit
                                </button>
                                <button id="toComplaint" type="button" class="btn btn-primary"
                                        style="position:absolute; right: 95px">
                                    History
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-md-6">
                <img th:src="@{/webStatic/img/new_index.jpg}" class="img-responsive" alt="" width="585" height="350">
            </div>
        </div>
    </div>
</div>

<!-- 报修服务 -->
<div id="about">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-md-6">
                <img th:src="@{/webStatic/img/portfolio/01-large.jpg}" class="img-responsive" alt="" width="585"
                     height="350">
            </div>
            <div class="col-xs-12 col-md-6">
                <div class="about-text">
                    <h2 style="font-size: 30px">Repair Service</h2>
                    <div class="col-lg-12 col-sm-12 col-xs-12" style="padding-left: 0;">
                        <form role="form" style="position: relative; top: 0">
                            <div class="input-group form-group">
                                <span class="input-group-addon">Name</span>
                                <input type="text" class="form-control" name="repairUserName" placeholder="Please enter your name"
                                       aria-describedby="basic-addon1"
                                       th:value="${session.webUser != null ? session.webUser.userName : ''}">
                            </div>
                            <div class="input-group form-group">
                                <span class="input-group-addon">Phone number</span>
                                <input type="text" class="form-control" name="repairPhone" placeholder="Please enter your phone number"
                                       aria-describedby="basic-addon1"
                                       th:value="${session.webUser != null ? session.webUser.phone : ''}">
                            </div>
                            <div class="form-group">
                                <textarea class="form-control" rows="5" name="repairInfo" placeholder="Please describe the detailed information you want to report for repair"
                                          style="resize: none"></textarea>
                            </div>
                            <div class="form-group">
                                <button id="repairBtn" type="button" class="btn btn-primary"
                                        style="position:absolute; right: 0px">
                                    Submit
                                </button>
                                <button id="toRepair" type="button" class="btn btn-primary"
                                        style="position:absolute; right: 95px">
                                    History
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 关于我们 -->
<div id="testimonials">
    <div class="container">
        <div class="section-title">
            <h2>About Us</h2>
        </div>
        <div class="row">
            <div class="col-xs-12 col-md-6">
                <img th:src="@{/webStatic/img/portfolio/06-large.jpg}" class="img-responsive" alt="" width="585"
                     height="350">
            </div>
            <div class="col-xs-12 col-md-6">
                <div class="about-text">
                    <h2 style="font-size: 28px">Greenfield Community</h2>
                    <div class="col-lg-12 col-sm-12 col-xs-12" style="padding-left: 0;text-indent: 2em">
                        The interior environment of Greenfield community is elegant and quiet, with plenty of greenery. Through the reasonable organization of community roads and the careful arrangement of leisure facilities, a natural and comfortable living environment is provided.
                        The surrounding facilities are complete, the facilities are complete, the property management is perfect, the security guard is on duty 24 hours a day, and the residents have high quality. The mainstream health of the community is positive, the community atmosphere is good, and the neighborhood relationships are harmonious.
                        The infrastructure is sound, with many surrounding commercial districts, making shopping, medical treatment, entertainment, and other convenient and efficient.
                        For a high-end personalized residential community that integrates high-quality services such as ecological environment, cultural environment, information technology, and management control automation.
                        The beautiful environment and the constant scenery of Lishui provide a living experience of returning to home and private space. The floors of the house are evenly distributed, the interior decoration is luxurious and grand, the visibility is very wide, and the lighting is good.
                        Overall, it embodies a modern minimalist style, with clear architectural design lines, atmospheric and minimalist colors, and distinct levels of architectural form in the community,
                        Rich in a strong sense of rhythm. Living here, embracing the hustle and bustle of the city, enjoying tranquility and freedom to control life, occupying the core and enjoying the future.
                        <br/><br/><br/>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 底部区域 -->
<script type="text/javascript" th:src="@{/webStatic/js/jquery.1.11.1.js}" src="js/jquery.1.11.1.js"></script>
<script type="text/javascript" th:src="@{/webStatic/js/bootstrap.js}" src="js/bootstrap.js"></script>
<script type="text/javascript" th:src="@{/webStatic/js/SmoothScroll.js}" src="js/SmoothScroll.js"></script>
<script type="text/javascript" th:src="@{/webStatic/js/nivo-lightbox.js}" src="js/nivo-lightbox.js"></script>
<script type="text/javascript" th:src="@{/webStatic/js/jqBootstrapValidation.js}"
        src="js/jqBootstrapValidation.js"></script>
<script type="text/javascript" th:src="@{/webStatic/js/contact_me.js}" src="js/contact_me.js"></script>
<script type="text/javascript" th:src="@{/webStatic/js/main.js}" src="js/main.js"></script>
<script type="text/javascript" th:src="@{/webStatic/layui/layui.js}" src="js/main.js"></script>
<script type="text/javascript" th:src="@{/webStatic/js/myIndex.js}" src="js/main.js"></script>
<script type="text/javascript" th:src="@{/adminStatic/js/MyLayuiUtils.js}" src="js/main.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<!--<script type="text/javascript" th:src="@{/webStatic/js/house.js}" src="js/house.js"></script>-->
<script>
    const properties = [
        { location: "北京市 朝阳区", area: "120㎡", type: "三室两厅", owner: "张三", phone: "13800001111" },
        { location: "上海市 浦东新区", area: "85㎡", type: "两室一厅", owner: "李四", phone: "13900002222" },
        { location: "广州市 天河区", area: "95㎡", type: "三室一厅", owner: "王五", phone: "13700003333" },
        { location: "深圳市 南山区", area: "110㎡", type: "四室两厅", owner: "赵六", phone: "13600004444" },
        { location: "杭州市 西湖区", area: "100㎡", type: "三室两厅", owner: "钱七", phone: "13500005555" }
    ];

    const houseMessage = document.getElementById("houseMessage");

    houseMessage.addEventListener('keydown', function(event) {
        if (event.key === 'Enter') {
            keypress()
        }
    });
    function keypress(){
        getHouse().then(data => renderTable(data));
    }

    function renderTable(data) {
        const tbody = document.getElementById("tableBody");
        tbody.innerHTML = "";
        data.forEach(item => {
            const row = document.createElement("tr");
            row.innerHTML = `
                    <td>Building:${item.parentBuilding}|Unit:${item.parentUnit}|Floor:${item.parentFloor}</td>
                    <td>${item.houseArea}m²</td>
                    <td>${item.houseType}</td>
                    <td>${item.ownerName}</td>
                    <td>${item.phone}</td>
                `;
            tbody.appendChild(row);
        });
    }

    async function getHouse() {
        let url = "http://localhost:2281/housing/house/getRentalHouse";
        if (houseMessage.value.trim() !== "") {
            url += `?message=${encodeURIComponent(houseMessage.value.trim())}`;
        }

        try {
            const response = await axios.post(url);
            const data = response.data;
            console.log('房源数据:', data);
            return data.data;
        } catch (error) {
            console.error('请求出错:', error);
            return [];
        }
    }

    renderTable(properties);
    keypress()
    function filterTable() {
        const keyword = document.getElementById("searchInput").value.toLowerCase();
        const filtered = properties.filter(item =>
            item.location.toLowerCase().includes(keyword) ||
            item.area.toLowerCase().includes(keyword) ||
            item.type.toLowerCase().includes(keyword) ||
            item.owner.toLowerCase().includes(keyword) ||
            item.phone.toLowerCase().includes(keyword)
        );
        renderTable(filtered);
    }
</script>
</body>
</html>